"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[860],{6860:(e,r,a)=>{a.r(r),a.d(r,{default:()=>l});var t=a(9060),s=a(3084),o=a(7872),c=a(2496);const l=()=>{const[e,r]=(0,t.useState)(1),[a,l]=(0,t.useState)([]),[i,n]=(0,t.useState)([]);(0,t.useEffect)((()=>{h()}),[]);const d=async e=>{try{const{data:{user:r}}=await o.G.auth.getUser(),{data:a,error:t}=await o.G.from("meal_foods").select("*").order("created_at",{ascending:!1}).eq("user_id",r.id).eq("meal_id",e);if(t)throw t;return a}catch(r){console.error("Error fetching all foods for meal:",r.message)}},h=async()=>{try{const{data:{user:e}}=await o.G.auth.getUser(),{data:r,error:a}=await o.G.from("meals").select("'*'").order("created_at",{ascending:!1});if(console.log(r),a)throw a;const t={};for(let o=0;o<r.length;o++){const e=await d(r[o].id);for(let r=0;r<e.length;r++){let a=e[r].meal_id;void 0!=t[a]||(t[a]=[]),t[a].push(e[r].food_id)}}const s=await(async()=>{try{const{data:{user:e}}=await o.G.auth.getUser(),{data:r,error:a}=await o.G.from("foods").select("*").order("created_at",{ascending:!1});if(a)throw a;return r}catch(a){console.error("Error fetching Foods:",a.message)}})();r.forEach((e=>{const r=[];let a=t[e.id];void 0==a&&(a=[]);for(let t=0;t<a.length;t++)s.forEach((e=>{e.id==a[t]&&r.push(e.name)}));e.foodList=r})),l(r||[])}catch(e){console.error("Error fetching Meals:",e.message)}};return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(s.u0,{className:"mb-4",children:[(0,c.jsx)(s.Q_,{children:"Meals"}),(0,c.jsxs)(s.Yj,{children:[(0,c.jsx)(s.wx,{variant:"pills",role:"tablist",children:(0,c.jsx)(s.SU,{role:"presentation",children:(0,c.jsx)(s.QJ,{active:1===e,component:"button",role:"tab","aria-controls":"all-tab-pane","aria-selected":1===e,onClick:()=>r(1),children:"All"})})}),(0,c.jsx)(s.CY,{children:(0,c.jsx)(s.Wy,{role:"tabpanel","aria-labelledby":"all-tab-pane",visible:1===e,children:(0,c.jsxs)(s.k7,{hover:!0,children:[(0,c.jsx)(s.Iy,{children:(0,c.jsxs)(s.uH,{children:[(0,c.jsx)(s.Qr,{scope:"col",children:"Name"}),(0,c.jsx)(s.Qr,{scope:"col",children:"Meal Items"}),(0,c.jsx)(s.Qr,{scope:"col",children:"Total Calories"}),(0,c.jsx)(s.Qr,{scope:"col",children:"Created At"})]})}),(0,c.jsx)(s.g7,{children:a.map((e=>(0,c.jsxs)(s.uH,{children:[(0,c.jsx)(s.kz,{children:e.title}),(0,c.jsx)(s.kz,{children:e.foodList.join(", ")}),(0,c.jsx)(s.kz,{children:e.total_calories}),(0,c.jsx)(s.kz,{children:e.created_at})]},e.id)))})]})})})]})]})})}}}]);
//# sourceMappingURL=860.8d5f47a6.chunk.js.map